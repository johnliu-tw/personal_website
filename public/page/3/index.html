<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="分享各種技術筆記心得，趨勢觀察與心得">
<meta property="og:type" content="website">
<meta property="og:title" content="John Liu 技術中心">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="John Liu 技術中心">
<meta property="og:description" content="分享各種技術筆記心得，趨勢觀察與心得">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="John Liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>John Liu 技術中心 - 管理者角度，開發者思維，初學者心態</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <h1 class="site-title">John Liu 技術中心</h1>
    </a>
      <p itemprop="description" style="font-size:0.75rem">管理者角度，開發者思維，初學者心態</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於 john</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>全部文章</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/02/14/2018-02-14-5300313/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/14/2018-02-14-5300313/" class="post-title-link" itemprop="url">Python - 資料視覺化 Bokeh ( model 和 sampleData 應用 ) </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2018-02-14 09:45:00" itemprop="dateCreated datePublished" datetime="2018-02-14T09:45:00+08:00">2018-02-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>歡迎先參考<a target="_blank" rel="noopener" href="http://johnliutw.logdown.com/posts/5300298">Python - 資料視覺化 Bokeh ( 初始化與圖表設定概念 ) </a>，看看一開始要怎麼預設 bokeh 的套件</p>
<hr>
<h3 id="multiple-chart-多圖"><a href="#multiple-chart-多圖" class="headerlink" title="multiple chart 多圖"></a>multiple chart 多圖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">factors = [<span class="string">&quot;Q1&quot;</span>, <span class="string">&quot;Q2&quot;</span>, <span class="string">&quot;Q3&quot;</span>,<span class="string">&quot;Q4&quot;</span>]</span><br><span class="line">p = figure(x_range=factors, plot_height=<span class="number">250</span>)</span><br><span class="line">y = [ <span class="number">10</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">9</span>]</span><br><span class="line">p.vbar(x=factors, top=y, width=<span class="number">0.9</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line">p.line(x=[<span class="string">&quot;Q1&quot;</span>, <span class="string">&quot;Q2&quot;</span>, <span class="string">&quot;Q3&quot;</span>, <span class="string">&quot;Q4&quot;</span>], y=[<span class="number">12</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">14</span>], color=<span class="string">&quot;red&quot;</span>, line_width=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>首先我們可以設定 x 軸的數字為有意義的詞，而不是數字，<br>只要設定 x_range 等於詞的 list 即可。<br>而想要在同張圖片具備兩個圖表，只要針對同一個 figure 物件，<br>call 用不同的 chart function ，就能放在同一個圖表內。<br><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300313/iaNkX7ocTTWMr1Ej9zdb_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-17%20%E4%B8%8B%E5%8D%885.43.14.png" alt="螢幕快照 2018-12-17 下午5.43.14.png"></p>
<h3 id="ColumnDataSource-model-抽象化"><a href="#ColumnDataSource-model-抽象化" class="headerlink" title="ColumnDataSource ( model 抽象化 )"></a>ColumnDataSource ( model 抽象化 )</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.models <span class="keyword">import</span> ColumnDataSource</span><br><span class="line"></span><br><span class="line">fruits = [<span class="string">&#x27;Apples&#x27;</span>, <span class="string">&#x27;Pears&#x27;</span>, <span class="string">&#x27;Nectarines&#x27;</span>, <span class="string">&#x27;Plums&#x27;</span>, <span class="string">&#x27;Grapes&#x27;</span>, <span class="string">&#x27;Strawberries&#x27;</span>]</span><br><span class="line">counts = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">source = ColumnDataSource(data=<span class="built_in">dict</span>(fruits=fruits, counts=counts, color=<span class="string">&quot;navy&quot;</span>))</span><br><span class="line">p = figure(x_range=fruits, plot_height=<span class="number">250</span>)</span><br><span class="line">p.vbar(x=<span class="string">&#x27;fruits&#x27;</span>, top=<span class="string">&#x27;counts&#x27;</span>, width=<span class="number">0.9</span>, color=<span class="string">&#x27;color&#x27;</span>, source=source)</span><br></pre></td></tr></table></figure>
<p>我們可以使用 ColumnDataSource 去封裝資料為 dictionary 的資料結構，<br>抽象化不同的資料命名，而在使用上，只要指定 source 就能取用。</p>
<h3 id="Sample-Data"><a href="#Sample-Data" class="headerlink" title="Sample Data"></a>Sample Data</h3><p>在使用 Sample Data 前，我們要先下載 Sample Data。<br>在終端機執行下載 sample data 的指令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bokeh sampledata</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> bokeh.sampledata.stocks <span class="keyword">import</span> GOOG</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(GOOG)</span><br><span class="line">df[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(df[<span class="string">&#x27;date&#x27;</span>])</span><br><span class="line"></span><br><span class="line">p = figure(plot_width=<span class="number">800</span>, plot_height=<span class="number">250</span>, x_axis_type=<span class="string">&quot;datetime&quot;</span>)</span><br><span class="line">p.line(df[<span class="string">&#x27;date&#x27;</span>], df[<span class="string">&#x27;close&#x27;</span>], color=<span class="string">&#x27;navy&#x27;</span>, alpha=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300313/Ox5MT5pWQOql4F4Qiefv_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-17%20%E4%B8%8B%E5%8D%885.57.10.png" alt="螢幕快照 2018-12-17 下午5.57.10.png"><br>通常會使用 pandas 的 DataFrame 來包裝資料，<br>而資料是要從外部 import 進來。<br>因為資料的 x 軸要用時間格式，所以也有指定 x_axis_type 的格式為 datatime。<br>可以參考<a target="_blank" rel="noopener" href="https://github.com/bokeh/bokeh/tree/master/bokeh/sampledata">Bokeh Sample Data Github</a>，看看有哪些資料可以取用</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/02/08/2018-02-08-5773175/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/08/2018-02-08-5773175/" class="post-title-link" itemprop="url">Linux - 系統排程設定 ( crontab )</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2018-02-08 17:41:00" itemprop="dateCreated datePublished" datetime="2018-02-08T17:41:00+08:00">2018-02-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Devops/" itemprop="url" rel="index"><span itemprop="name">Devops</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>這邊的設定都是在 linux 下為主，包括 Ubuntu, CentOS 都能實作。</p>
<p>以下的指令可以進入排程指令文件檔進行編輯目前所有的排程任務</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure>
<p>那排程任務會長得如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ 0 0-23 * * * bash -l -c &quot;cd &#x2F;home&#x2F;app &amp;&amp; bundle exec rake user:send_tender_repayment_list&quot;</span><br><span class="line">$ 0 8 * * * bash -l -c &quot;cd &#x2F;home&#x2F;app &amp;&amp; bundle exec rake user:send__repayment_notice&quot;</span><br></pre></td></tr></table></figure>
<p>以上的意思是，</p>
<ol>
<li>每天每個小時都會執行 bash -l -c “cd /home/app &amp;&amp; bundle exec rake user:send_tender_repayment_list” 這個指令</li>
<li>每天早上8點都會執行 bash -l -c “cd /home/app &amp;&amp; bundle exec rake user:send__repayment_notice”<br>格式可參考鳥哥製作的表格：<br><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5773175/BwB4pY4XRwLeXvl9bRWF_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-30%20%E4%B8%8B%E5%8D%885.53.05.png" alt="螢幕快照 2018-08-30 下午5.53.05.png"></li>
</ol>
<p>可以用以下指令列出所有的排程:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -l</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/01/31/2018-01-31-5300301/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/31/2018-01-31-5300301/" class="post-title-link" itemprop="url">Python - 資料視覺化 Bokeh ( 常用圖表: Step, Multiple line, Scatter, Bar ) </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2018-01-31 14:10:00" itemprop="dateCreated datePublished" datetime="2018-01-31T14:10:00+08:00">2018-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>歡迎先參考<a target="_blank" rel="noopener" href="http://johnliutw.logdown.com/posts/5300298">Python - 資料視覺化 Bokeh ( 初始化與圖表設定概念 ) </a>，看看一開始要怎麼預設 bokeh 的套件</p>
<hr>
<p>這篇文章會簡單介紹幾個常用的圖表，和如何設定製作這些圖表。</p>
<h3 id="Step-圖"><a href="#Step-圖" class="headerlink" title="Step 圖"></a>Step 圖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.step([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], line_width=<span class="number">2</span>, mode=<span class="string">&quot;before&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>mode 參數是設定 Step 圖，在走到下一個座標時，在線之間轉折的模式，<br>有 before, center, after 三種選擇。<br><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300301/PHVhgom8RhGyvqXBENKk_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-16%20%E4%B8%8B%E5%8D%885.15.09.png" alt="螢幕快照 2018-12-16 下午5.15.09.png"></p>
<h3 id="Multiple-line-圖"><a href="#Multiple-line-圖" class="headerlink" title="Multiple line 圖"></a>Multiple line 圖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.multi_line([[<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">6</span>]], [[<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">5</span>]], color=[<span class="string">&quot;firebrick&quot;</span>, <span class="string">&quot;navy&quot;</span>], alpha=[<span class="number">0.9</span>, <span class="number">0.1</span>])</span><br></pre></td></tr></table></figure>
<p>x 和 y 座標是吃二維陣列，[[第一個線 x 座標], [第二個線 x 座標]]，<br>color 參數可以設定不同 line 的顏色，可以參考 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Web_colors">Web color wiki</a>，基本上以這方式命名即可，也吃 rgb, hex 等顏色模式。<br>alpha 是透明度，值越小越透明。</p>
<h3 id="Scatter-圖"><a href="#Scatter-圖" class="headerlink" title="Scatter 圖"></a>Scatter 圖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.circle([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], size=<span class="number">20</span>, color=<span class="string">&quot;navy&quot;</span>, alpha=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300301/BFq70tQPSsGx0vfJx2hd_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-16%20%E4%B8%8B%E5%8D%885.26.23.png" alt="螢幕快照 2018-12-16 下午5.26.23.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.square([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>], size=<span class="number">20</span>, color=<span class="string">&quot;#FF0000&quot;</span>, alpha=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300301/0stVQHQgRgyUAIDrtjMs_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-16%20%E4%B8%8B%E5%8D%885.26.30.png" alt="螢幕快照 2018-12-16 下午5.26.30.png"></p>
<p>兩個其實是同一張圖，所以放在一起講，<br>circle 是繪圖出圓形圖，square 是繪圖出方型圖，<br>size 決定圖型的大小。</p>
<h3 id="Bar-圖"><a href="#Bar-圖" class="headerlink" title="Bar 圖"></a>Bar 圖</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.vbar(x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], width=<span class="number">0.5</span>, bottom=<span class="number">0</span>, top=[<span class="number">1.2</span>, <span class="number">2.5</span>, <span class="number">3.7</span>], color=<span class="string">&quot;firebrick&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300301/R51vJkTDSKOawIEXZci9_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-16%20%E4%B8%8B%E5%8D%885.31.46.png" alt="螢幕快照 2018-12-16 下午5.31.46.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.hbar(y=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], height=<span class="number">0.5</span>, left=<span class="number">0</span>, right=[<span class="number">1.2</span>, <span class="number">2.5</span>, <span class="number">3.7</span>], color=<span class="string">&quot;navy&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300301/irkzk1gQvyTwBQdP3spg_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-16%20%E4%B8%8B%E5%8D%885.31.51.png" alt="螢幕快照 2018-12-16 下午5.31.51.png"><br>兩個 function 也是同一張圖，<br>vabr 內的 bottom 是起始點，運用的好的話可以變成一種錯覺圖，<br>top 則是該圖的 y 座標。<br>hbar 內的 height 就是相對 vbar 的起始點，right 則是該圖的 y 座標。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/01/24/2018-01-24-5300298/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/24/2018-01-24-5300298/" class="post-title-link" itemprop="url">Python - 資料視覺化 Bokeh ( 初始化與圖表設定概念 ) </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2018-01-24 06:20:00" itemprop="dateCreated datePublished" datetime="2018-01-24T06:20:00+08:00">2018-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Bokeh 是 Python 一個用於資料視覺化的套件，<br>其核心遵從 D3.js 的圖表理念，搭配 Python 語言畫出圖片，<br>並能輸出成 html 圖表的形式。</p>
<h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install NumPy Jinja2 Six Requests Tornado PyYaml Pandas bokeh</span><br></pre></td></tr></table></figure>
<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>通常要引入 bokeh 下得 io 和 plotting 兩個組件<br>會引入 output_notebook 是因為使用 jupyter notebook 開發。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bokeh.io <span class="keyword">import</span> output_notebook, show</span><br><span class="line"><span class="keyword">from</span> bokeh.plotting <span class="keyword">import</span> figure, output_file</span><br></pre></td></tr></table></figure>
<h3 id="Line-圖與結構"><a href="#Line-圖與結構" class="headerlink" title="Line 圖與結構"></a>Line 圖與結構</h3><p>基礎的結構如下: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p = figure(plot_width=<span class="number">400</span>, plot_height=<span class="number">400</span>)</span><br><span class="line">p.line([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>], line_width=<span class="number">2</span>)</span><br><span class="line">show(p)</span><br><span class="line">output_notebook()</span><br><span class="line">output_file(<span class="string">&quot;line.html&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/26132/blog/25104/post/5300298/wK3MA0kSRvWPwFx9v4Vt_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-12-12%20%E4%B8%8B%E5%8D%882.17.58.png" alt="螢幕快照 2018-12-12 下午2.17.58.png"><br>不同的圖形是歸類在 figure 這個 class 下，並直接 call function 就能直接初始化出來。<br>line 中吃前兩個必要的參數，必須是 list ，第一個是 x 的 data，第二個是 y 的 data。<br>第三個後是 optional 的參數，通常是設定圖表樣式，這裡舉例 line_width，線寬度。<br>show, output_notebook(), output_file 會輸出圖表在 notebook 和執行此 python code 的檔案目錄中。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/01/11/2018-01-11-4735556/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/11/2018-01-11-4735556/" class="post-title-link" itemprop="url">給社會新鮮人的挺身而進 - Facebook 營運長的智慧讀後感</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2018-01-11 16:31:00" itemprop="dateCreated datePublished" datetime="2018-01-11T16:31:00+08:00">2018-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-07 23:51:13" itemprop="dateModified" datetime="2021-02-07T23:51:13+08:00">2021-02-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%A7%80%E9%BB%9E/" itemprop="url" rel="index"><span itemprop="name">觀點</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近一位很親的家人在去美國拜訪前，留了一本書，<br>是臉書營運長 Sandberg 的 『給社會新鮮人的挺身而進』。<br>最近利用工作之餘的時間，翻了翻這本書，站在社會新鮮人的角度，<br>好好體會科技巨頭營運長的智慧，並簡單歸納幾個吸收到的經驗。</p>
<h2 id="一、自信與抱負"><a href="#一、自信與抱負" class="headerlink" title="一、自信與抱負"></a>一、自信與抱負</h2><p>我認同書中提到，限制一個人發展的，往往是內心對自己的戒慎恐懼。<br>如果一個人總是心懷恐懼，沒有自信，畫地自限，深怕失敗，<br>那對於更開闊領域的工作就算有能力，必定更加勝任不了。<br>這也是華人社會的通病，許多年輕人對自己沒有自信，帶著唯唯諾諾的態度踏入職場，<br>或是對於『管事』這件事感到恐懼、怕事，不願意承擔更多風險與責任，即使這意味高成長。<br>讓很多非常有能力的人，走的卻很緩慢，非常可惜。<br>書中有提到一個小技巧，可以『弄假成真』，增加自信心<br>覺得自己笑的不夠自然，就強迫自己多笑，硬擠出笑容一小時，<br>就算一開始不自然，久了就會笑得很自然。<br>覺得自己身體纖細不夠大器，就用力展開身體，假裝體態非常健美，<br>久了給人的感覺，身體會逐漸大器起來，自己也會覺得強壯許多。</p>
<h2 id="二、方格人生"><a href="#二、方格人生" class="headerlink" title="二、方格人生"></a>二、方格人生</h2><p>人生是爬方格不是走階梯，沒有死路，只有無窮的選擇可以爬到終點。<br>遇到失敗，並不是說人生的路都白走了，<br>而是這個方格方向不適合自己，需要換個方向爬罷了。<br>因此我們無法設定人生的每一步，只要設定好大方向，並透過各種方法達成即可。<br>同樣的，我們有時可以在方格中找到“捷徑”，<br>雖然爬得比較辛苦，但會比別人更快達到終點，<br>但這就是『快速成長』的機會，偶爾會遇到，如果不把握住，成長的效率可能就大打折扣。</p>
<h2 id="三、人人都是導師"><a href="#三、人人都是導師" class="headerlink" title="三、人人都是導師"></a>三、人人都是導師</h2><p>並不是學富五車，或是職場高管是我們唯一應該積極爭取的導師對像，<br>也不是我們登門拜訪，一句『安安，你可以當我導師嗎？』，就能請到的導師。<br>真正的導師應該是有互惠的關係，我能從你的指引中成長許多，<br>你也能在指導我的過程中反省自己所學的知識合理性。<br>因此在不同的議題上，我們會接觸不同的人，<br>當我們產生互動，發現彼此有能幫助彼此的地方時，兩個就能成為互相的『導師』。<br>而人生導師這個議題比較漫長，的確需要較為資深的人協助。<br>因此更需要培養好自己的能力和態度，才能在有機會接觸這樣層級的人時，<br>好好產生互惠關係，建立真正健康良好的導師制度。</p>
<h2 id="四、完成勝過完美"><a href="#四、完成勝過完美" class="headerlink" title="四、完成勝過完美"></a>四、完成勝過完美</h2><p>非常喜歡這句話，因為我也曾經感同身受，<br>大四時，總在一開始忽視後來的時間安排，<br>輕易的將自己塞滿了各項想嘗試的事情，但也讓自己疲於奔命，<br>甚至在赴歐旅遊一個月出發當天，在機場繼續處理工作，<br>現在回想起，如果當時的自己能夠不要那麼貪心，<br>專注在其中一兩項事情，並用盡全力強化它，<br>或許現在的我，能想得更深，使用更艱深的技術。</p>
<h2 id="五、替自己爭取加薪"><a href="#五、替自己爭取加薪" class="headerlink" title="五、替自己爭取加薪"></a>五、替自己爭取加薪</h2><p>這是我看得最認真的一段(笑)，因為我想這是華人新鮮人最缺乏的一點，<br>但我們當然不是無腦的直接打開辦公室的門，向老闆討錢，<br>有三件事情是我們在爭取加薪時可以注意的:</p>
<h3 id="1-做足功課"><a href="#1-做足功課" class="headerlink" title="1. 做足功課"></a>1. 做足功課</h3><p>收集市場資訊是我們必須做到的，要向老闆證明，目前市場上“自己”的售價為何，<br>除了 Google 搜尋和看一些比薪水的網站外，<br>我也會固定爬 Ptt 的 Soft Job 和 Salary 版，上面很多鄉民會分享相關產業的待遇訊息，<br>另外多跟相關產業、職位的人交流，在聊天間也可以稍微了解到不同公司狀況的行情價，<br>這在跟老闆討論加薪時能有更客觀的因素。</p>
<h3 id="2-不主動透露薪資"><a href="#2-不主動透露薪資" class="headerlink" title="2. 不主動透露薪資"></a>2. 不主動透露薪資</h3><p>做這件事的原因，是讓面試成功的因素更加取決於面試本身，而不是薪水的部分，<br>盡量在有個確定錄取的氛圍下，面試官詢問相關問題時，再做出透露，<br>如果是面試的規定，那務必誠實回答，但建議把整個 package 說明清楚，<br>例如底薪、休假、福利等等。<br>但仍在未定之天時，不正面回應，或是反過來詢問:『請問這份職位，在貴公司的薪水平均範圍』，<br>盡量多談話，收集更多資訊，再決定透露的數字。</p>
<h3 id="3-個人思維，群體行動"><a href="#3-個人思維，群體行動" class="headerlink" title="3. 個人思維，群體行動"></a>3. 個人思維，群體行動</h3><p>建議再做出個人權益的爭取時，盡量使用的字眼以『我們』代替『我』，<br>將自己定位為團體的一部份，並強調自己替團隊能做出的貢獻和價值，<br>展現自己對團隊的關心勝過個人，讓面試官越有機會接受自己所開出的數字。</p>
<h3 id="4-不要接受第一次開價"><a href="#4-不要接受第一次開價" class="headerlink" title="4. 不要接受第一次開價"></a>4. 不要接受第一次開價</h3><p>大概八成的新鮮人聽到第一次價錢，就邊賭爛的邊說好我接受，<br>這就是協商談判的經驗談，第一次開出的價錢，通常是對企業主最有利的價錢，<br>但那不一定是對我們這些小老百姓最有價值的，<br>因此呼應第二點，搜集更多的資訊，獲得更多的報價，<br>除了底薪外，股份、特休、年終，等等都是在可以討論的範圍內，<br>但這邊也要拿捏自己的斤兩，避免提出太不合理的待遇。</p>
<p>這裡整理了整本書對於我來說，最印象深刻的幾個概念，<br>中間也有混入一些個人的意見和經驗分享，<br>但除了這幾點，還探討了更多關於職業女性的議題，<br>但不在我聚焦的範圍內，就不多作著墨，<br>希望能對大家的職涯有所幫助，也不吝指教。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/12/29/2017-12-29-3280361/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/29/2017-12-29-3280361/" class="post-title-link" itemprop="url">Ruby on Rails - 自幹型 filter 篩選器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-12-29 10:50:00" itemprop="dateCreated datePublished" datetime="2017-12-29T10:50:00+08:00">2017-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index"><span itemprop="name">Ruby on Rails</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近又有需求是做 filter 功能，<br>要針對試卷，去做年級、試卷科以及試卷一些欄位值做篩選,<br>因此秉持著 StackOverFlow 工程師的精神 (誤)，<br>上網找了好幾個 filter 相關的 gem，<br>但比對目前 DB 的 Schema (本來需求無規劃 filter )和 gem 的使用方法後，<br>發現自己刻一個可能更有效率 XDD。</p>
<h3 id="Step1-相關-Model-整理"><a href="#Step1-相關-Model-整理" class="headerlink" title="Step1 相關 Model 整理"></a>Step1 相關 Model 整理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Paper &lt; ApplicationRecord</span><br><span class="line">    has_many :paper_gradeships</span><br><span class="line">    has_many :grades, :through &#x3D;&gt; :paper_gradeships</span><br><span class="line">    belongs_to :paper_subject, class_name: &quot;PaperSubject&quot;, foreign_key: &quot;paper_subject_id&quot;</span><br><span class="line">    accepts_nested_attributes_for :paper_gradeships</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Grade &lt; ApplicationRecord</span><br><span class="line">    has_many :paper_gradeships </span><br><span class="line">    has_many :papers, :through &#x3D;&gt; :paper_gradeships</span><br><span class="line">    accepts_nested_attributes_for :paper_gradeships</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class PaperSubject &lt; ApplicationRecord</span><br><span class="line">    has_many :papers</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class PaperGradeship &lt; ApplicationRecord</span><br><span class="line">    belongs_to :paper , required: false</span><br><span class="line">    belongs_to :grade , required: false</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="Step2-Partial-View-建構"><a href="#Step2-Partial-View-建構" class="headerlink" title="Step2 Partial View 建構"></a>Step2 Partial View 建構</h3><p>因為這個 filter 要放在 papers/index 頁，<br>但不想讓這段 code 影響到原本乾淨的 index，<br>所以做成 Partial View 來處理這個問題。</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">/* _filter.html.erb */</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;filter&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/papers/api/filter&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">	科目 : &lt;%=</span><span class="ruby"> collection_select(<span class="symbol">:filter</span>, <span class="symbol">:subject_name</span>, <span class="variable">@subject_names</span>, <span class="symbol">:name</span>, <span class="symbol">:name</span>, <span class="symbol">prompt:</span> <span class="literal">true</span>) </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">	年級 : &lt;%=</span><span class="ruby"> collection_select(<span class="symbol">:filter</span>, <span class="symbol">:grade_name</span>, <span class="variable">@grade_names</span> , <span class="symbol">:name</span>, <span class="symbol">:name</span>, <span class="symbol">prompt:</span> <span class="literal">true</span>) </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">	上架日期: &lt;%=</span><span class="ruby"> collection_select(<span class="symbol">:filter</span>, <span class="symbol">:init_public_date</span>, <span class="variable">@publc_dates</span>, <span class="symbol">:public_date</span>, <span class="symbol">:public_date</span>, <span class="symbol">prompt:</span> <span class="literal">true</span>) </span><span class="xml">%&gt; ~ &lt;%=</span><span class="ruby"> collection_select(<span class="symbol">:filter</span>, <span class="symbol">:end_public_date</span>, <span class="variable">@public_dates</span>, <span class="symbol">:public_date</span>, <span class="symbol">:public_date</span>, <span class="symbol">prompt:</span> <span class="literal">true</span>) </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>篩選<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/papers&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span>&gt;</span>重設<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/* papers_controller_rb *<span class="regexp">/</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">def index </span></span><br><span class="line"><span class="regexp">	@subject_names = Subject.distinct(:name).order(:name)</span></span><br><span class="line"><span class="regexp">  @grade_names = Grade.distinct(:name).order(:name)</span></span><br><span class="line"><span class="regexp">  @public_dates = Paper.distinct(:public_date).order(:public_date)</span></span><br><span class="line"><span class="regexp">end</span></span><br><span class="line"><span class="regexp"></span></span><br></pre></td></tr></table></figure>
<p>在 form 內設計 filter 物件，並在 paper#index 內，<br>根據相關聯的 table 做出實例 variable 來儲存選項資料，並傳遞到 view 產生下拉式欄位選項，<br>最後把 form 的指定位置拉向新路由，並建構對應的 controller function，<br>就可以來寫篩選的 code 拉！<br></p>
<h3 id="Step3-篩選資料"><a href="#Step3-篩選資料" class="headerlink" title="Step3 篩選資料"></a>Step3 篩選資料</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span></span></span><br><span class="line"></span><br><span class="line">		<span class="comment"># 設定篩選的參數</span></span><br><span class="line">    subject_name = params[<span class="symbol">:filter</span>][<span class="symbol">:subject_name</span>]</span><br><span class="line">    grade_name = params[<span class="symbol">:filter</span>][<span class="symbol">:grade_name</span>]</span><br><span class="line">    init_public_date = params[<span class="symbol">:filter</span>][<span class="symbol">:init_public_date</span>]</span><br><span class="line">    end_public_date = params[<span class="symbol">:filter</span>][<span class="symbol">:end_public_date</span>]  </span><br><span class="line">    </span><br><span class="line">		<span class="comment"># 初始化撈出所有的Paper資料</span></span><br><span class="line">    <span class="variable">@filter_papers</span> = Paper.all</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#根據不同參數做出篩選</span></span><br><span class="line">    <span class="keyword">if</span> subject_name.present?</span><br><span class="line">      subject_id = Subject.where(<span class="symbol">:name</span> =&gt; subject_name).pluck(<span class="symbol">:id</span>)</span><br><span class="line">      subject_paper_subject_ids = PapersubjectSubjectship.where(<span class="symbol">:subject_id</span> =&gt; subject_id).pluck(<span class="symbol">:paper_subject_id</span>)</span><br><span class="line">      <span class="variable">@filter_papers</span> = <span class="variable">@filter_papers</span>.where(<span class="symbol">:paper_subject_id</span> =&gt; subject_paper_subject_ids)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> grade_name.present?</span><br><span class="line">      grade_id = Grade.where(<span class="symbol">:name</span> =&gt; grade_name, <span class="symbol">:platform_type</span> =&gt; session[<span class="symbol">:platform_id</span>]).pluck(<span class="symbol">:id</span>)</span><br><span class="line">      grade_paper_ids = PaperGradeship.where(<span class="symbol">:grade_id</span> =&gt; grade_id).pluck(<span class="symbol">:paper_id</span>)</span><br><span class="line">      <span class="variable">@filter_papers</span> = <span class="variable">@filter_papers</span>.where(<span class="symbol">:id</span> =&gt; grade_paper_ids)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> init_public_date.present? &amp;&amp; end_public_date.empty?</span><br><span class="line">      <span class="variable">@filter_papers</span> = <span class="variable">@filter_papers</span>.where(<span class="string">&quot;public_date &gt;= &#x27;<span class="subst">#&#123;init_public_date&#125;</span>&#x27;&quot;</span>) </span><br><span class="line">    <span class="keyword">elsif</span> end_public_date.present? &amp;&amp; init_public_date.empty? </span><br><span class="line">      <span class="variable">@filter_papers</span> = <span class="variable">@filter_papers</span>.where(<span class="string">&quot;public_date &lt;= &#x27;<span class="subst">#&#123;end_public_date&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    <span class="keyword">elsif</span> end_public_date.present? &amp;&amp; init_public_date.empty?</span><br><span class="line">      <span class="variable">@filter_papers</span> = <span class="variable">@filter_papers</span>.where(<span class="string">&quot;public_date BETWEEN &#x27;<span class="subst">#&#123;init_public_date&#125;</span>&#x27; and &#x27;<span class="subst">#&#123;end_public_date&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>將傳遞過來的參數儲存起來後，先撈出所有的Paper，<br>再根據 Ruby 很方便的 where 連接機制，在每段資料寫每段自己的 where 篩選語句，<br>然後在各自的篩選塊把 where 語句掛上，而在日期判斷處，<br>由於傳遞過來的是 string 格式，在 where 語句不用 ruby 的 sql 產生語句，<br>而是自行編寫 sql 語句。</p>
<h3 id="Step4-更新篩選後的資料"><a href="#Step4-更新篩選後的資料" class="headerlink" title="Step4 更新篩選後的資料"></a>Step4 更新篩選後的資料</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span></span></span><br><span class="line">	<span class="keyword">if</span> params[<span class="symbol">:filter</span>].present?</span><br><span class="line">		<span class="variable">@papers</span> = Paper.where(<span class="symbol">:id</span> =&gt; session[<span class="symbol">:filter_papers_id</span>])</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  	<span class="variable">@papers</span> = Paper.all</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span></span></span><br><span class="line">  <span class="comment">#篩選資料的程式碼們</span></span><br><span class="line">  .....</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  session[<span class="symbol">:filter_papers_id</span>] = <span class="variable">@filter_papers</span>.pluck(<span class="symbol">:id</span>)</span><br><span class="line">  respond_to <span class="keyword">do</span> <span class="params">|format|</span></span><br><span class="line">    format.html &#123; redirect_to <span class="string">&#x27;/papers?filter=true&#x27;</span>&#125;</span><br><span class="line">    format.json &#123; render <span class="symbol">:index</span>, <span class="symbol">status:</span> <span class="symbol">:ok</span>, <span class="symbol">location:</span> <span class="variable">@filter_papers</span> &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>這邊的機制很單純，篩選完後，將資料用 pluck 這個 method，把 ID 整理後存入 session，<br>並導向 index ，帶一個 filter 參數。<br>而 index 判斷如果有 filter 參數，就根據 session 抓取對應的 papers 資料。<br>非常好，一個簡單但好用且好擴充篩選選項的 filter 機制就這樣大功告成！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/12/15/2017-12-15-3280356/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/15/2017-12-15-3280356/" class="post-title-link" itemprop="url">Ruby on Rails - Rack Script 撰寫 ( Data 轉移 - CSV 格式)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-12-15 02:50:00" itemprop="dateCreated datePublished" datetime="2017-12-15T02:50:00+08:00">2017-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index"><span itemprop="name">Ruby on Rails</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近在處理資料庫資料的轉移的問題，<br>請教一些前輩後，認為寫 Rack task 是最有效率的方式。<br>首先先在 lib/tasks 的目錄裡建立 ruby 檔案 - create_data.rake</p>
<h2 id="Rake-Script-格式制定"><a href="#Rake-Script-格式制定" class="headerlink" title="Rake Script 格式制定"></a>Rake Script 格式制定</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;csv&#x27;</span></span><br><span class="line">namespace <span class="symbol">:csv</span> <span class="keyword">do</span> </span><br><span class="line">    task <span class="symbol">:load_data</span> =&gt; [ <span class="symbol">:environment</span> ] <span class="keyword">do</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">## Data轉移的code</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>因為 csv 檔案的資料處理方式較單純，可以用純程式碼解決，<br>所以把舊資料庫的 SQL 資料輸出成 csv 格式。<br>在 Ruby 中要操作 csv 檔案，要先 require csv 檔案。<br>另外第二行，則是制定此 rake task 的 namespace 為 csv，<br>最後第三行，宣告此 task 名稱為 load_data。</p>
<h2 id="CSV-資料匯入"><a href="#CSV-資料匯入" class="headerlink" title="CSV 資料匯入"></a>CSV 資料匯入</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;csv&#x27;</span></span><br><span class="line">namespace <span class="symbol">:csv</span> <span class="keyword">do</span> </span><br><span class="line">    task <span class="symbol">:load_data</span> =&gt; [ <span class="symbol">:environment</span> ] <span class="keyword">do</span>  </span><br><span class="line">      csv_text = File.expand_path(<span class="string">&#x27;../data.csv&#x27;</span>, <span class="keyword">__FILE__</span>)</span><br><span class="line">      counter = <span class="number">0</span></span><br><span class="line">      CSV.foreach(csv_text) <span class="keyword">do</span> <span class="params">|row|</span></span><br><span class="line">        <span class="comment">## Data處理的code</span></span><br><span class="line"></span><br><span class="line">        puts counter</span><br><span class="line">    	<span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>再來 task 的內容很簡單，先將檔案放在 lib 目錄下，並利用 File.expand_path 方法讀入檔案，<br>最後就可以直接使用 CSV 物件去逐行讀取 csv 資料，並處理，<br>另外習慣上我會加 counter 幫我追蹤目前資料處理的進度。</p>
<p>最後直接在 terminal 輸入 rake csv:load_data，<br>資料轉移就非常快速的完成了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/11/23/2017-11-23-3280338/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/23/2017-11-23-3280338/" class="post-title-link" itemprop="url">Ruby on Rails - Audio uploader 音頻上傳</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-11-23 15:50:00" itemprop="dateCreated datePublished" datetime="2017-11-23T15:50:00+08:00">2017-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index"><span itemprop="name">Ruby on Rails</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>會有這篇文章的起源是，本來需求端只需要上傳圖片，<br>但是因為檔案類型彈性調整的要求，所以就需要也接受 mp3 音檔的上傳。</p>
<p>那這邊我也是運用強大的 carrierwave 服務，上傳圖片功能的安裝<a target="_blank" rel="noopener" href="http://johnliutw.logdown.com/posts/2239534/ruby-on-rails-image-uploader-upload-pictures">請參考此</a></p>
<p>###Step1</p>
<p>Gemfile 裡加上 : </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem <span class="string">&#x27;carrierwave-audio&#x27;</span></span><br></pre></td></tr></table></figure>
<p>###Step2</p>
<p>跟 Image upload 功能相同，也有運用第三方套件來協助此功能，<br>這邊引用的是 sox 這個老牌的音頻轉檔軟體，有兩種下載方法</p>
<h4 id="1-使用-terminal-mac"><a href="#1-使用-terminal-mac" class="headerlink" title="1.使用 terminal(mac)"></a>1.使用 terminal(mac)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span> &lt; /dev/null 2&gt; /dev/null</span><br></pre></td></tr></table></figure>
<p>再來用 homebrew</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install sox</span><br></pre></td></tr></table></figure>
<h4 id="2-SourceForge下載檔案"><a href="#2-SourceForge下載檔案" class="headerlink" title="2.SourceForge下載檔案"></a>2.SourceForge下載檔案</h4><p>SourceForge 有提供檔案供下載:<br><a target="_blank" rel="noopener" href="https://sourceforge.net/projects/sox/files/sox/14.3.2/">https://sourceforge.net/projects/sox/files/sox/14.3.2/</a></p>
<p>###Step3<br>再來在 Termainal 裡 bundle 安裝</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bundle install</span><br></pre></td></tr></table></figure>
<p>###Step4<br>我想要放在同一個 rb 檔裡管理，原始檔案如下:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageUploader</span> &lt; CarrierWave::Uploader::<span class="title">Base</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Include RMagick or MiniMagick support:</span></span><br><span class="line">  <span class="comment"># include CarrierWave::RMagick</span></span><br><span class="line">  <span class="keyword">include</span> CarrierWave::MiniMagick</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Choose what kind of storage to use for this uploader:</span></span><br><span class="line">  storage <span class="symbol">:file</span></span><br><span class="line">  <span class="comment"># storage :fog</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Override the directory where uploaded files will be stored.</span></span><br><span class="line">  <span class="comment"># This is a sensible default for uploaders that are meant to be mounted:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">store_dir</span></span></span><br><span class="line">    <span class="string">&quot;uploads/<span class="subst">#&#123;model.<span class="keyword">class</span>.to_s.underscore&#125;</span>/<span class="subst">#&#123;mounted_as&#125;</span>/<span class="subst">#&#123;model.id&#125;</span>&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Provide a default URL as a default if there hasn&#x27;t been a file uploaded:</span></span><br><span class="line">  <span class="comment"># def default_url</span></span><br><span class="line">  <span class="comment">#   # For Rails 3.1+ asset pipeline compatibility:</span></span><br><span class="line">  <span class="comment">#   # ActionController::Base.helpers.asset_path(&quot;fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#x27;_&#x27;))</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment">#   &quot;/images/fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#x27;_&#x27;)</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Process files as they are uploaded:</span></span><br><span class="line">  <span class="comment"># process :scale =&gt; [200, 300]</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># def scale(width, height)</span></span><br><span class="line">  <span class="comment">#   # do something</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create different versions of your uploaded files:</span></span><br><span class="line">   version <span class="symbol">:thumb</span> <span class="keyword">do</span></span><br><span class="line">     process <span class="symbol">:resize_to_fit</span> =&gt; [<span class="number">50</span>, <span class="number">50</span>]</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Add a white list of extensions which are allowed to be uploaded.</span></span><br><span class="line">  <span class="comment"># For images you might use something like this:</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">extension_white_list</span></span></span><br><span class="line">     <span class="string">%w(jpg png)</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Override the filename of the uploaded files:</span></span><br><span class="line">  <span class="comment"># Avoid using model.id or version_name here, see uploader/store.rb for details.</span></span><br><span class="line">  <span class="comment"># def filename</span></span><br><span class="line">  <span class="comment">#   &quot;something.jpg&quot; if original_filename</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>這邊就能直接 include CarrierWave audio的服務，<br>再來我要判斷傳進來的檔案類型，來作不同的檔案命名配置服務，<br>所以會設定兩個 protected 層級的 method ，來替我判斷檔案類型。<br>最後在白名單清單中，新增 mp3，就完成了 model 層所有 function 的建置。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageUploader</span> &lt; CarrierWave::Uploader::<span class="title">Base</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Include RMagick or MiniMagick support:</span></span><br><span class="line">  <span class="comment"># include CarrierWave::RMagick</span></span><br><span class="line">  <span class="keyword">include</span> CarrierWave::MiniMagick</span><br><span class="line">  <span class="keyword">include</span> CarrierWave::Audio</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Choose what kind of storage to use for this uploader:</span></span><br><span class="line">  storage <span class="symbol">:file</span></span><br><span class="line">  <span class="comment"># storage :fog</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Override the directory where uploaded files will be stored.</span></span><br><span class="line">  <span class="comment"># This is a sensible default for uploaders that are meant to be mounted:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">store_dir</span></span></span><br><span class="line">    <span class="string">&quot;uploads/<span class="subst">#&#123;model.<span class="keyword">class</span>.to_s.underscore&#125;</span>/<span class="subst">#&#123;mounted_as&#125;</span>/<span class="subst">#&#123;model.id&#125;</span>&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Provide a default URL as a default if there hasn&#x27;t been a file uploaded:</span></span><br><span class="line">  <span class="comment"># def default_url</span></span><br><span class="line">  <span class="comment">#   # For Rails 3.1+ asset pipeline compatibility:</span></span><br><span class="line">  <span class="comment">#   # ActionController::Base.helpers.asset_path(&quot;fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#x27;_&#x27;))</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment">#   &quot;/images/fallback/&quot; + [version_name, &quot;default.png&quot;].compact.join(&#x27;_&#x27;)</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Process files as they are uploaded:</span></span><br><span class="line">  <span class="comment"># process :scale =&gt; [200, 300]</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># def scale(width, height)</span></span><br><span class="line">  <span class="comment">#   # do something</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create different versions of your uploaded files:</span></span><br><span class="line">   version <span class="symbol">:thumb</span>, <span class="symbol">:if</span> =&gt; <span class="symbol">:image?</span> <span class="keyword">do</span></span><br><span class="line">     process <span class="symbol">:resize_to_fit</span> =&gt; [<span class="number">50</span>, <span class="number">50</span>]</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">   version <span class="symbol">:mp3</span>, <span class="symbol">:if</span> =&gt; <span class="symbol">:audio?</span> <span class="keyword">do</span></span><br><span class="line">      process <span class="symbol">:convert</span> =&gt; [&#123;<span class="symbol">output_format:</span> <span class="symbol">:mp3</span>&#125;]</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">full_filename</span><span class="params">(for_file)</span></span></span><br><span class="line">        <span class="string">&quot;<span class="subst">#&#123;<span class="keyword">super</span>.chomp(File.extname(<span class="keyword">super</span>))&#125;</span>.mp3&quot;</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Add a white list of extensions which are allowed to be uploaded.</span></span><br><span class="line">  <span class="comment"># For images you might use something like this:</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">extension_white_list</span></span></span><br><span class="line">     <span class="string">%w(jpg png mp3)</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Override the filename of the uploaded files:</span></span><br><span class="line">  <span class="comment"># Avoid using model.id or version_name here, see uploader/store.rb for details.</span></span><br><span class="line">  <span class="comment"># def filename</span></span><br><span class="line">  <span class="comment">#   &quot;something.jpg&quot; if original_filename</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line">  protected</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">image?</span><span class="params">(new_file)</span></span></span><br><span class="line">    new_file.content_type.<span class="keyword">include</span>? <span class="string">&#x27;image&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">audio?</span><span class="params">(new_file)</span></span></span><br><span class="line">    new_file.content_type.<span class="keyword">include</span>? <span class="string">&#x27;audio&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>###Step5<br>最後在前端可以直接引用 url ，並套 tag，讓其能顯示:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= @question.title_attr.url %&gt;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/11/20/2017-11-20-asp-net-static-pattern-variable-of-thunder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/20/2017-11-20-asp-net-static-pattern-variable-of-thunder/" class="post-title-link" itemprop="url">Asp.net - Static 型態變數之雷</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-11-20 08:50:00" itemprop="dateCreated datePublished" datetime="2017-11-20T08:50:00+08:00">2017-11-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-07 23:47:59" itemprop="dateModified" datetime="2021-02-07T23:47:59+08:00">2021-02-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">其他程式語言</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前一陣子在開發時，發現有個 Bug 是在特定某頁，<br>B 使用者會使用到 A 使用者的身份留言。<br>這麼嚴重的問題當然就當天開始hotfix….<br>因此找了一陣子後，發現是靜態變數的問題。<br>雖然說這是在開發 Asp.net C# 專案時遇到的問題，<br>但這個問題的核心知識是在不同語言的開發專案都會遇到的。<br>static 變數是有著 “全域變數” 的概念，因此會把資料存在 Server 端，<br>任何人呼叫該變數時，取的資料都是<strong>同一個</strong>。</p>
<p>我們原始的code是如此：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">SpecialTripDetail</span> : <span class="title">System.Web.UI.Page</span></span><br><span class="line">&#123;</span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">protected</span> LoggedInUser loggedInUser = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Page_Load</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">     	loggedInUser = (LoggedInUser)Session[<span class="string">&quot;user&quot;</span>];</span><br><span class="line">      ...</span><br><span class="line">      </span><br><span class="line">      [<span class="meta">WebMethod</span>]</span><br><span class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">DeletedMember</span>(<span class="params"><span class="built_in">string</span> journeyId</span>)</span></span><br><span class="line"><span class="function"></span>    	&#123;</span><br><span class="line">          <span class="built_in">string</span> planId = SpecialTripService.FindJoinedPlan(journeyId, loggedInUser.id);</span><br><span class="line">          ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之前的工程師可能沒有想清楚，想說在做 Web method 讓前台 Ajax 打時，<br>可以直接 call 用 loggedInUser 的 id，編譯會過，測試也會過嘖嘖….<br>但這樣下一個使用者如果沒有複寫，就使用到該 static 變數，就會用到別人的資料。</p>
<p>因此簡單改寫成這樣:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">SpecialTripDetail</span> : <span class="title">System.Web.UI.Page</span></span><br><span class="line">&#123;</span><br><span class="line">		<span class="keyword">protected</span> LoggedInUser loggedInUser = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Page_Load</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">     	loggedInUser = (LoggedInUser)Session[<span class="string">&quot;user&quot;</span>];</span><br><span class="line">      ...</span><br><span class="line">      </span><br><span class="line">      [<span class="meta">WebMethod</span>]</span><br><span class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">DeletedMember</span>(<span class="params"><span class="built_in">string</span> journeyId, <span class="built_in">string</span> memberId</span>)</span></span><br><span class="line"><span class="function"></span>    	&#123;</span><br><span class="line">          <span class="built_in">string</span> planId = SpecialTripService.FindJoinedPlan(journeyId, memberId);</span><br><span class="line">          ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>讓前端 Ajax 打時多送一個參數即可，<br>順便提醒自己未來 CodeReview 時要更全面性的檢視問題。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2017/11/05/2017-11-05-3280374/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/05/2017-11-05-3280374/" class="post-title-link" itemprop="url">Ruby on Rails - pluck, 多個Active Record 特定欄位轉化陣列 </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2017-11-05 17:55:00" itemprop="dateCreated datePublished" datetime="2017-11-05T17:55:00+08:00">2017-11-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ruby-on-Rails/" itemprop="url" rel="index"><span itemprop="name">Ruby on Rails</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>介紹一個很簡單可是很好用的 method - pluck，<br>他可以很方便的，幫我們把 Active Record 裡的欄位轉化為陣列，<br>例如:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">question_ids = Question.where(<span class="symbol">:type</span> =&gt; <span class="number">1</span>).pluck(<span class="symbol">:id</span>)</span><br></pre></td></tr></table></figure>
<p>這樣就可以取得 Question 這個 model 裡的 id，並轉化為陣列</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">puts question_ids</span><br><span class="line">==&gt; [<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Liu</p>
  <div class="site-description" itemprop="description">分享各種技術筆記心得，趨勢觀察與心得</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
  </nav>
</div>



<div class="category-all">
  <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Devops/">Devops</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby-on-Rails/">Ruby on Rails</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/">其他程式語言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%80%E9%BB%9E/">觀點</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BB%9F%E9%AB%94%E6%8A%80%E8%83%BD/">軟體技能</a></li></ul>
</div>
      </div>

    </div>

  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Liu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
