<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Linux Advance Command and ToolsText Manipulationawkawk 為文字指令，可以將文字按 “ ” 分欄位，分別儲存到 $0, $1 …等等變數中。例如以下指令會輸出某檔結構: 12$ ls -lhdrwxr-xr-x   5 johnliu  staff     160  5 13 11:46 bootstrap 使用 pipeline | 轉入 aw">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 進階指令與工具">
<meta property="og:url" content="http://example.com/2019/05/20/2019-05-20-linux-advanced-instructions/index.html">
<meta property="og:site_name" content="John Liu 技術中心">
<meta property="og:description" content="Linux Advance Command and ToolsText Manipulationawkawk 為文字指令，可以將文字按 “ ” 分欄位，分別儲存到 $0, $1 …等等變數中。例如以下指令會輸出某檔結構: 12$ ls -lhdrwxr-xr-x   5 johnliu  staff     160  5 13 11:46 bootstrap 使用 pipeline | 轉入 aw">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2019-05-20T01:19:00.000Z">
<meta property="article:modified_time" content="2021-02-06T09:00:50.841Z">
<meta property="article:author" content="John Liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2019/05/20/2019-05-20-linux-advanced-instructions/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>Linux 進階指令與工具 | John Liu 技術中心</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <h1 class="site-title">John Liu 技術中心</h1>
    </a>
      <p itemprop="description" style="font-size:0.75rem">管理者角度，開發者思維，初學者心態</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於 john</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>全部文章</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/05/20/2019-05-20-linux-advanced-instructions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Liu">
      <meta itemprop="description" content="分享各種技術筆記心得，趨勢觀察與心得">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="John Liu 技術中心">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux 進階指令與工具
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2019-05-20 09:19:00" itemprop="dateCreated datePublished" datetime="2019-05-20T09:19:00+08:00">2019-05-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2021-02-06 17:00:50" itemprop="dateModified" datetime="2021-02-06T17:00:50+08:00">2021-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Linux-Advance-Command-and-Tools"><a href="#Linux-Advance-Command-and-Tools" class="headerlink" title="Linux Advance Command and Tools"></a>Linux Advance Command and Tools</h2><h3 id="Text-Manipulation"><a href="#Text-Manipulation" class="headerlink" title="Text Manipulation"></a>Text Manipulation</h3><h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><p>awk 為文字指令，可以將文字按 “ ” 分欄位，分別儲存到 $0, $1 …等等變數中。<br>例如以下指令會輸出某檔結構:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -lh</span><br><span class="line">drwxr-xr-x   5 johnliu  staff     160  5 13 11:46 bootstrap</span><br></pre></td></tr></table></figure>
<p>使用 pipeline | 轉入 awk 指令中，可分割自己喜歡的資料顯示格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -lh | awk <span class="string">&#x27;&#123;print &quot;Permission: &quot; $1 &quot; User: &quot; $3&#125;&#x27;</span></span><br><span class="line">Permission: drwxr-xr-x User: johnliu</span><br></pre></td></tr></table></figure>
<p>要注意，$0 會儲存整個 row 的資料，因此第一格是儲存在 $1 中。</p>
<h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><p>sed 為文字取代指令，可以使用正規表達式。<br>例，將” This is a book “中獨立的 is ，改成 IS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;This is a book&#x27;</span> | sed <span class="string">&#x27;s/ is/ IS/g&#x27;</span></span><br><span class="line">This IS a book </span><br></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>可將文字，按造行去做排序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// try.txt</span><br><span class="line">apple</span><br><span class="line">cat</span><br><span class="line">banana</span><br><span class="line">zebra</span><br><span class="line">dog</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sort try.txt</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">cat</span><br><span class="line">dog</span><br><span class="line">zebra</span><br></pre></td></tr></table></figure>
<p>除了基本的文字排序，還可以按照不同的 flag 做到單位排序、排序結果輸出等等…</p>
<h4 id="fmt"><a href="#fmt" class="headerlink" title="fmt"></a>fmt</h4><p>可以針對文本做限制行數的呈現<br>例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// text.txt</span><br><span class="line">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry<span class="string">&#x27;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</span></span><br></pre></td></tr></table></figure>
<p>設定每行寬度最長 40 個字元</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ fmt -w 40 text.txt</span><br><span class="line">Lorem Ipsum is simply dummy text of the</span><br><span class="line">printing and typesetting industry. Lorem</span><br><span class="line">Ipsum has been the industry<span class="string">&#x27;s standard</span></span><br><span class="line"><span class="string">dummy text ever since the 1500s, when an</span></span><br><span class="line"><span class="string">unknown printer took a galley of type</span></span><br><span class="line"><span class="string">and scrambled it to make a type specimen</span></span><br><span class="line"><span class="string">book. It has survived not only five</span></span><br><span class="line"><span class="string">centuries, but also the leap into</span></span><br><span class="line"><span class="string">electronic typesetting, remaining</span></span><br><span class="line"><span class="string">essentially unchanged. It was</span></span><br><span class="line"><span class="string">popularised in the 1960s with the</span></span><br><span class="line"><span class="string">release of Letraset sheets containing</span></span><br><span class="line"><span class="string">Lorem Ipsum passages, and more recently</span></span><br><span class="line"><span class="string">with desktop publishing software like</span></span><br><span class="line"><span class="string">Aldus PageMaker including versions of</span></span><br><span class="line"><span class="string">Lorem Ipsum.</span></span><br></pre></td></tr></table></figure>
<h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><p>這個指令可以當作 sed 的直觀簡易版，不需要寫正規式，就能做出文字取代的工作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tr <span class="string">&quot;\n\r&quot;</span> <span class="string">&quot;，&quot;</span> &lt; some.txt  &gt; some.txt</span><br></pre></td></tr></table></figure>
<p>第一個詞組 “\n\r” 是要被取代的文字，<br>第二個詞組 “，” 是替換的文字，<br>第三個詞組 &lt; some.txt 是被此替換邏輯替換文字的文檔，<br>第四個詞組 &gt; some.txt 是替換完後輸出的文檔。</p>
<h4 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h4><p>輸出包含行數的檔案文字內容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat package.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;gulp&quot;</span>: <span class="string">&quot;^3.8.8&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">$ nl package.json</span><br><span class="line">   1	 &#123;</span><br><span class="line">   2	  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">   3	  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">   4	    <span class="string">&quot;gulp&quot;</span>: <span class="string">&quot;^3.8.8&quot;</span></span><br><span class="line">   5	  &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="egrep-fgrep"><a href="#egrep-fgrep" class="headerlink" title="egrep, fgrep"></a>egrep, fgrep</h4><p>egrep 為可使用『延伸性正規表達式』，例如: +, | 等運用正規式符號的grep。<br>fgrep 常用來搜尋字元為正規表達式符號的文字，例如: $ 等。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ egrep -n <span class="string">&#x27;gd|good&#x27;</span> some.txt</span><br><span class="line">gd</span><br><span class="line">good</span><br><span class="line">$ grep some.txt</span><br><span class="line">This is $</span><br><span class="line"></span><br><span class="line">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown prin</span><br><span class="line"></span><br><span class="line">$ fgrep $ some.txt</span><br><span class="line">This is $</span><br></pre></td></tr></table></figure>
<h3 id="Process-Monitoring"><a href="#Process-Monitoring" class="headerlink" title="Process Monitoring"></a>Process Monitoring</h3><h4 id="htop、atop"><a href="#htop、atop" class="headerlink" title="htop、atop"></a>htop、atop</h4><p>htop 是一個取代傳統 top 指令的套件，而不是指令，<br>可以用偏 GUI 的顯示做到 top 即時監控的功能，<br>atop 更加強調了負載的資料詳盡性。</p>
<h4 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h4><p>lsof 全名為 List Open Files<br>可以列出所有程式正在使用的檔案</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ lsof</span><br><span class="line">COMMAND    PID    USER   FD      TYPE             DEVICE   SIZE/OFF     NODE NAME</span><br><span class="line">loginwind   91 johnliu  cwd       DIR                1,4        928        2 /</span><br><span class="line">loginwind   91 johnliu  txt       REG                1,4    1278368   319782 /System/Library/CoreServices/loginwindow.app/Contents/MacOS/loginwindow</span><br></pre></td></tr></table></figure>
<h3 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h3><h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>nmap 為 Linux 套件，可以掃描指定網路主機的網路狀況。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ nmap www.hinet.com</span><br><span class="line">Starting Nmap 6.40 ( http://nmap.org ) at 2014-10-02 08:09 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> www.hinet.net (202.39.253.11)</span><br><span class="line">Host is up (0.0034s latency).</span><br><span class="line">rDNS record <span class="keyword">for</span> 202.39.253.11: 202-39-253-11.HINET-IP.hinet.net</span><br><span class="line">Not shown: 998 filtered ports</span><br><span class="line">PORT    STATE  SERVICE</span><br><span class="line">80/tcp  open   http</span><br><span class="line">113/tcp closed ident</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 6.05 seconds</span><br></pre></td></tr></table></figure>
<h4 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h4><p>tcpdump 是可以擷取網路封包的指令，語法像是:<br>tcpdump -i eth0 ‘tcp port 22 and host 192.168.0.X’<br>-i eth0 為指定網路介面為 eth<br>‘tcp port 22 and host 192.168.0.X’ 為擷取 tcp port 號 22，且來自或目的為 192.168.0.x 位址的封包資料<br>因此就有機會看到明碼傳輸的資料。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tcpdump -nn -X <span class="string">&#x27;host www.rentincredit.com&#x27;</span></span><br><span class="line"></span><br><span class="line">00:20:11.667638 IP 172.20.10.4.51463 &gt; 172.104.94.210.443: Flags [P.], seq 1398:1501, ack 1, win 2048, options [nop,nop,TS val 373105961 ecr 796896181], length 103</span><br><span class="line">	0x0000:  6abf 6b00 f864 4abf 6b00 c784 0800 4502  j.k..dJ.k.....E.</span><br><span class="line">	0x0010:  009b 0000 4000 4006 7908 ac14 0a04 ac68  ....@.@.y......h</span><br><span class="line">	0x0020:  5ed2 c907 01bb 7a00 b193 7107 b104 8018  ^.....z...q.....</span><br><span class="line">	0x0030:  0800 49f9 0000 0101 080a 163d 2529 2f7f  ..I........=%)/.</span><br><span class="line">	0x0040:  abb5 8331 e324 c994 d003 6ffd 5d87 9f96  ...1.$....o.]...</span><br><span class="line">	0x0050:  f26f 9bcd faec d559 1bf1 3a53 32a2 4540  .o.....Y..:S2.E@</span><br><span class="line">	0x0060:  6406 8385 e0fa 67ba 5ab5 16a1 de1f b154  d.....g.Z......T</span><br><span class="line">	0x0070:  47ff 12a3 ef2f d6f7 34d0 eb91 263c 4e7d  G..../..4...&amp;&lt;N&#125;</span><br><span class="line">	0x0080:  a3e1 c503 8f31 cbdc 3b01 1cff bda7 72a0  .....1..;.....r</span><br></pre></td></tr></table></figure>
<p>此指令需有 root 權限，可配合 -nn 做 IP 轉碼和 -X 做封包查看</p>
<h4 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h4><p>這也是 Linux 的網路套件，結合 ping 和 traceroute ，針對網路節點去做管理與顯示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mtr www.rentincredit.com</span><br><span class="line"> Host                  Loss%   Snt   Last   Avg  Best  Wrst StDev</span><br><span class="line"> 1. 172.20.10.1        0.0%   120    0.8   0.6   0.3   1.6   0.1</span><br><span class="line"> 2. ???</span><br><span class="line"> 3. 10.54.28.101       0.0%   120   31.9  35.1  22.8 104.0  11.3</span><br><span class="line"> 4. ???</span><br><span class="line"> 5. ???</span><br><span class="line"> 6. ???</span><br><span class="line"> 7. rentincredit.com   0.0%   119   67.6  62.2  47.2 105.6   8.7</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="airmon、airodump"><a href="#airmon、airodump" class="headerlink" title="airmon、airodump"></a>airmon、airodump</h4><p>兩者常用作為利用 kali 破解網路密碼的工具，<br>airmon將無線網卡打開為監聽模式，airodump 則會擷取並搜集 AP 的封包</p>
<h4 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h4><p>dig 會用來做 DNS 的解析，可以解析每個查詢的 DNS Server，<br>常新增 +trace 去做到細部追查</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ dig +trace www.rentincredit.com</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; +trace www.rentincredit.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">.			29308	IN	NS	m.root-servers.net.</span><br><span class="line">.			29308	IN	NS	d.root-servers.net.</span><br><span class="line">.			29308	IN	NS	i.root-servers.net.</span><br><span class="line">.			29308	IN	NS	b.root-servers.net.</span><br><span class="line">.			29308	IN	NS	h.root-servers.net.</span><br><span class="line">.			29308	IN	NS	l.root-servers.net.</span><br><span class="line">.			29308	IN	NS	c.root-servers.net.</span><br><span class="line">.			29308	IN	NS	g.root-servers.net.</span><br><span class="line">.			29308	IN	NS	j.root-servers.net.</span><br><span class="line">.			29308	IN	NS	e.root-servers.net.</span><br><span class="line">.			29308	IN	NS	a.root-servers.net.</span><br><span class="line">.			29308	IN	NS	f.root-servers.net.</span><br><span class="line">.			29308	IN	NS	k.root-servers.net.</span><br><span class="line">;; Received 239 bytes from 172.20.10.1<span class="comment">#53(172.20.10.1) in 30 ms</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">www.rentincredit.com.	86400	IN	CNAME	rentincredit.com.</span><br><span class="line">rentincredit.com.	86400	IN	A	172.104.94.210</span><br><span class="line">;; Received 79 bytes from 216.66.80.18<span class="comment">#53(ns5.he.net) in 62 ms</span></span><br></pre></td></tr></table></figure>
<h4 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h4><p>iptables 是用 linux 核心直接執行的防火牆軟體，<br>因此防火牆的設定皆會透過 command 方式設定，<br>防火的方法，是會解析封包內容是否符合設定的要求，去解析。</p>
<h3 id="System-Performance"><a href="#System-Performance" class="headerlink" title="System Performance"></a>System Performance</h3><h4 id="nmon"><a href="#nmon" class="headerlink" title="nmon"></a>nmon</h4><p>nmon 為系統監控軟體，可以區別不同的資訊塊，例如 I/O, Memory Status 等等…<br>在 mac os 上沒有此軟體，需要另外下載類似的其他軟體。</p>
<h4 id="iostat-vmstat"><a href="#iostat-vmstat" class="headerlink" title="iostat, vmstat"></a>iostat, vmstat</h4><p>iostat 專注在 disk 上的 IO， Linux 顯示的資訊會比 Mac Os 詳盡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@localhost:~<span class="comment"># iostat</span></span><br><span class="line">Linux 4.4.0-130-generic (localhost) 	05/21/2019 	_x86_64_	(2 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           4.57    0.03    1.99    0.31    0.32   92.77</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">sda               0.84         0.09        10.14    1794177  206840904</span><br><span class="line">sdb               0.01         0.11         0.14    2326764    2946620</span><br><span class="line">sdc              21.71         1.69        91.47   34555012 1866536056</span><br><span class="line"></span><br><span class="line">johnliu@mac:~<span class="comment"># iostat</span></span><br><span class="line">              disk0       cpu    load average</span><br><span class="line">    KB/t  tps  MB/s  us sy id   1m   5m   15m</span><br><span class="line">   15.78   29  0.45  15  8 77  5.80 4.03 3.18</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>vmstat 主要是查看虛擬記憶體的狀態。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vmstat</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 1  0 462824 2401392  34120 532116    0    0     1    49    1    1  5  2 93  0  0</span><br></pre></td></tr></table></figure>
<h4 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h4><p>sar 主要用來分析 CPU 的狀況，且能控制輸出頻率和次數，<br>使用不同的 flag ，也能知道不同面向的負載程度為何。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sar 1 3</span><br><span class="line">Linux 4.4.0-130-generic (localhost) 	05/21/2019 	_x86_64_	(2 CPU)</span><br><span class="line"></span><br><span class="line">11:06:09 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">11:06:10 AM     all      4.95      0.00      2.97      0.00      0.99     91.09</span><br><span class="line">11:06:11 AM     all      4.50      0.00      2.00      0.00      0.50     93.00</span><br><span class="line">11:06:12 AM     all      3.55      0.00      1.52      0.00      0.00     94.92</span><br><span class="line">Average:        all      4.34      0.00      2.17      0.00      0.50     92.99</span><br></pre></td></tr></table></figure>
<p>1 3 這兩個數字組合，為每 1 秒鐘產生一次狀態報告，總共產生三次。</p>
<h4 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h4><p>strace 可以監控一個『指令』使用的參數、輸入輸出的資料等等，<br>由於 Linux 無法直接監控硬碟，例: /dev，因此需要用 cat 、 tail 先讀取該硬碟，<br>再做 strace</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ strace cat /dev/</span><br><span class="line">execve(<span class="string">&quot;/bin/cat&quot;</span>, [<span class="string">&quot;cat&quot;</span>, <span class="string">&quot;/dev/&quot;</span>], [/* 22 vars */]) = 0</span><br><span class="line">brk(NULL)                               = 0x1dbd000</span><br><span class="line">access(<span class="string">&quot;/etc/ld.so.nohwcap&quot;</span>, F_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">access(<span class="string">&quot;/etc/ld.so.preload&quot;</span>, R_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">open(<span class="string">&quot;/etc/ld.so.cache&quot;</span>, O_RDONLY|O_CLOEXEC) = 3</span><br><span class="line">fstat(3, &#123;st_mode=S_IFREG|0644, st_size=43921, ...&#125;) = 0</span><br><span class="line">mmap(NULL, 43921, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7fd6a228f000</span><br><span class="line">close(3)                                = 0</span><br><span class="line">access(<span class="string">&quot;/etc/ld.so.nohwcap&quot;</span>, F_OK)      = -1 ENOENT (No such file or directory)</span><br><span class="line">open(<span class="string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>, O_RDONLY|O_CLOEXEC) = 3</span><br><span class="line"><span class="built_in">read</span>(3, <span class="string">&quot;\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0P\t\2\0\0\0\0\0&quot;</span>..., 832) = 832</span><br></pre></td></tr></table></figure>



    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/05/14/2019-05-14-coursera-notes-operation-system/" rel="prev" title="Coursera 筆記 - Operation System">
      <i class="fa fa-chevron-left"></i> Coursera 筆記 - Operation System
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/05/22/2019-05-22-python-environment-variable-settings-env-auto-settings/" rel="next" title="Python - 環境變數設定( env 自動設定 )">
      Python - 環境變數設定( env 自動設定 ) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-Advance-Command-and-Tools"><span class="nav-number">1.</span> <span class="nav-text">Linux Advance Command and Tools</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Text-Manipulation"><span class="nav-number">1.1.</span> <span class="nav-text">Text Manipulation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#awk"><span class="nav-number">1.1.1.</span> <span class="nav-text">awk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sed"><span class="nav-number">1.1.2.</span> <span class="nav-text">sed</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort"><span class="nav-number">1.1.3.</span> <span class="nav-text">sort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fmt"><span class="nav-number">1.1.4.</span> <span class="nav-text">fmt</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tr"><span class="nav-number">1.1.5.</span> <span class="nav-text">tr</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nl"><span class="nav-number">1.1.6.</span> <span class="nav-text">nl</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#egrep-fgrep"><span class="nav-number">1.1.7.</span> <span class="nav-text">egrep, fgrep</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Process-Monitoring"><span class="nav-number">1.2.</span> <span class="nav-text">Process Monitoring</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#htop%E3%80%81atop"><span class="nav-number">1.2.1.</span> <span class="nav-text">htop、atop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lsof"><span class="nav-number">1.2.2.</span> <span class="nav-text">lsof</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Network"><span class="nav-number">1.3.</span> <span class="nav-text">Network</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nmap"><span class="nav-number">1.3.1.</span> <span class="nav-text">nmap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tcpdump"><span class="nav-number">1.3.2.</span> <span class="nav-text">tcpdump</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mtr"><span class="nav-number">1.3.3.</span> <span class="nav-text">mtr</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#airmon%E3%80%81airodump"><span class="nav-number">1.3.4.</span> <span class="nav-text">airmon、airodump</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dig"><span class="nav-number">1.3.5.</span> <span class="nav-text">dig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iptables"><span class="nav-number">1.3.6.</span> <span class="nav-text">iptables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-Performance"><span class="nav-number">1.4.</span> <span class="nav-text">System Performance</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nmon"><span class="nav-number">1.4.1.</span> <span class="nav-text">nmon</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iostat-vmstat"><span class="nav-number">1.4.2.</span> <span class="nav-text">iostat, vmstat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sar"><span class="nav-number">1.4.3.</span> <span class="nav-text">sar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#strace"><span class="nav-number">1.4.4.</span> <span class="nav-text">strace</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Liu</p>
  <div class="site-description" itemprop="description">分享各種技術筆記心得，趨勢觀察與心得</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Liu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
