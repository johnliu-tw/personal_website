---
layout: post
title: '版本控制 - 新手入門網站開發版本控制(Git or SVN) '
date: 2017-08-03 16:37
comments: true
categories:
- Git
---
相信對於版本控制有所涉獵的朋友，一定對於 **Git** 這個最大宗的版控工具非常嫻熟。
但在 Git 風靡世界前，網站開發的世界是由 **SVN** 為主流的版控工具，並搭配 **tortoiseSVN** 這個類似 Github Desktop App的應用程式，很方便的圖形化介面版控。
而在SVN 的版控世界，因為工作原因有接觸到很不錯的入門版本管理架構，
對於網站產品剛起步的專案或是公司，敝人認為或許是一個不錯可參考的solution。

以下是隨意用繪圖軟體拉的版本控制架構:
![螢幕快照 2017-08-04 上午12.52.23.png](http://user-image.logdown.io/user/26132/blog/25104/post/2134412/fzAXkeFxQ6W5d2wj500w_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202017-08-04%20%E4%B8%8A%E5%8D%8812.52.23.png)

在這個版控架構內，總共有四個大的管理層級: Master、Trunk、Develop和Tag，在部署上我們總共有1個正式環境和1個測試環境(Test)和1個開發環境(Dev)。
我們就先從程式碼的最初 - Develop版本開始。

## Develop
在Develop這個管理層級裡，會按照開發或部署上版的版次區分。
在上方的參考圖中，就標示了有"1.1"、"1.2"和"2.1"三個版本，由於上版後會有測試和除錯階段，因此開發上可能不是線性的，所以會有同時間開發3個版次的可能。
而在每個版本開發完後，會把Trunk的程式碼和開發完版本的程式碼Merge，並清除Conflict，確定沒有衝突後，就會進入下一個階段 - Trunk。

## Trunk
Trunk的意思是主線，這個版本代表的是"穩定的公共版本"，也就是說，在這個版本的程式碼都是屬於沒有Crash問題，經過Code Review檢視過的程式碼，因此在把最新開發完版本的程式碼倒進 Trunk 前，我們會先把Trunk的程式碼Merge進Develop中，確保合併公共版本後沒有問題。
在把Develop的程式碼Merge進Trunk並Commit後，我們通常會把這部分的程式碼部署在 Dev 環境，讓工程師們有個最新的參考以及讓Engineer Lead可以做第一步實機測試。

## Master
Master 是“目前上線”的版本，會部署在正式環境和測試環境，通常在Dev環境測試沒問題後，會把程式碼從Trunk Merge進Master，並且部署到測試環境做需求端PM或一般使用者的測試，等到測試完畢，Bug都修完後，就能部署到正式環境。

## Tag
Tag 裡的每個版本，基本上是對應 Develop 的每個版本，由於 Develop 的不穩定性以及老舊版本刪除的可能性，我們會利用 Tag 去替每個版次做備份，而做的時機約在部署上正式環境，一定時間內沒有任何問題的情況下做備份。
而 Tag 裡的程式碼是來自於該次部署時的 Trunk，因為是穩定的公共版本。

以上是在公司負責版控幾個月後的一些整理心得，希望讓開發版控入門的新手會有更清楚的架構，
也歡迎討論會有什麼能改善的流程。
